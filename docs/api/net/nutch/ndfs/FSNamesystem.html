<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_06) on Fri Jan 14 11:49:35 PST 2005 -->
<TITLE>
FSNamesystem (Nutch 0.6 API)
</TITLE>

<META NAME="keywords" CONTENT="net.nutch.ndfs.FSNamesystem class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="FSNamesystem (Nutch 0.6 API)";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/FSNamesystem.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../net/nutch/ndfs/FSDirectory.html" title="class in net.nutch.ndfs"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../net/nutch/ndfs/FSParam.html" title="class in net.nutch.ndfs"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="FSNamesystem.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
net.nutch.ndfs</FONT>
<BR>
Class FSNamesystem</H2>
<PRE>
<A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><B>net.nutch.ndfs.FSNamesystem</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../net/nutch/ndfs/FSConstants.html" title="interface in net.nutch.ndfs">FSConstants</A></DD>
</DL>
<HR>
<DL>
<DT>public class <B>FSNamesystem</B><DT>extends <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A><DT>implements <A HREF="../../../net/nutch/ndfs/FSConstants.html" title="interface in net.nutch.ndfs">FSConstants</A></DL>

<P>
The FSNamesystem tracks several important tables.

 1)  valid fsname --> blocklist  (kept on disk, logged)
 2)  Set of all valid blocks (inverted #1)
 3)  block --> machinelist (kept in memory, rebuilt dynamically from reports)
 4)  machine --> blocklist (inverted #2)
 5)  LRU cache of updated-heartbeat machines
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/util/logging/Logger.html" title="class or interface in java.util.logging">Logger</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#LOG">LOG</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_net.nutch.ndfs.FSConstants"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Fields inherited from interface net.nutch.ndfs.<A HREF="../../../net/nutch/ndfs/FSConstants.html" title="interface in net.nutch.ndfs">FSConstants</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../net/nutch/ndfs/FSConstants.html#BLOCK_SIZE">BLOCK_SIZE</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#BLOCKREPORT_INTERVAL">BLOCKREPORT_INTERVAL</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#CHUNKED_ENCODING">CHUNKED_ENCODING</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#COMPLETE_SUCCESS">COMPLETE_SUCCESS</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#DATANODE_STARTUP_PERIOD">DATANODE_STARTUP_PERIOD</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#EXPIRE_INTERVAL">EXPIRE_INTERVAL</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#HEARTBEAT_INTERVAL">HEARTBEAT_INTERVAL</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#LEASE_PERIOD">LEASE_PERIOD</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OBSOLETE_INTERVAL">OBSOLETE_INTERVAL</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_ACK">OP_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_BLOCKRECEIVED">OP_BLOCKRECEIVED</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_BLOCKREPORT">OP_BLOCKREPORT</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_ABANDONBLOCK">OP_CLIENT_ABANDONBLOCK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_ABANDONBLOCK_ACK">OP_CLIENT_ABANDONBLOCK_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_ADDBLOCK">OP_CLIENT_ADDBLOCK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_ADDBLOCK_ACK">OP_CLIENT_ADDBLOCK_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_COMPLETEFILE">OP_CLIENT_COMPLETEFILE</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_COMPLETEFILE_ACK">OP_CLIENT_COMPLETEFILE_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_DATANODEREPORT">OP_CLIENT_DATANODEREPORT</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_DATANODEREPORT_ACK">OP_CLIENT_DATANODEREPORT_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_DELETE">OP_CLIENT_DELETE</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_DELETE_ACK">OP_CLIENT_DELETE_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_EXISTS">OP_CLIENT_EXISTS</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_EXISTS_ACK">OP_CLIENT_EXISTS_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_ISDIR">OP_CLIENT_ISDIR</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_ISDIR_ACK">OP_CLIENT_ISDIR_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_LISTING">OP_CLIENT_LISTING</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_LISTING_ACK">OP_CLIENT_LISTING_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_MKDIRS">OP_CLIENT_MKDIRS</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_MKDIRS_ACK">OP_CLIENT_MKDIRS_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_OBTAINLOCK">OP_CLIENT_OBTAINLOCK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_OBTAINLOCK_ACK">OP_CLIENT_OBTAINLOCK_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_OPEN">OP_CLIENT_OPEN</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_OPEN_ACK">OP_CLIENT_OPEN_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_RAWSTATS">OP_CLIENT_RAWSTATS</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_RAWSTATS_ACK">OP_CLIENT_RAWSTATS_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_RELEASELOCK">OP_CLIENT_RELEASELOCK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_RELEASELOCK_ACK">OP_CLIENT_RELEASELOCK_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_RENAMETO">OP_CLIENT_RENAMETO</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_RENAMETO_ACK">OP_CLIENT_RENAMETO_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_RENEW_LEASE">OP_CLIENT_RENEW_LEASE</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_RENEW_LEASE_ACK">OP_CLIENT_RENEW_LEASE_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_STARTFILE">OP_CLIENT_STARTFILE</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_STARTFILE_ACK">OP_CLIENT_STARTFILE_ACK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_CLIENT_TRYAGAIN">OP_CLIENT_TRYAGAIN</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_ERROR">OP_ERROR</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_FAILURE">OP_FAILURE</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_HEARTBEAT">OP_HEARTBEAT</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_INVALIDATE_BLOCKS">OP_INVALIDATE_BLOCKS</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_READ_BLOCK">OP_READ_BLOCK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_READSKIP_BLOCK">OP_READSKIP_BLOCK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_TRANSFERBLOCKS">OP_TRANSFERBLOCKS</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_TRANSFERDATA">OP_TRANSFERDATA</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OP_WRITE_BLOCK">OP_WRITE_BLOCK</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#OPERATION_FAILED">OPERATION_FAILED</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#RUNLENGTH_ENCODING">RUNLENGTH_ENCODING</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#STILL_WAITING">STILL_WAITING</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#SYSTEM_STARTUP_PERIOD">SYSTEM_STARTUP_PERIOD</A>, <A HREF="../../../net/nutch/ndfs/FSConstants.html#WRITE_COMPLETE">WRITE_COMPLETE</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#FSNamesystem(java.io.File)">FSNamesystem</A></B>(<A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/io/File.html" title="class or interface in java.io">File</A>&nbsp;dir)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dir is where the filesystem directory state 
 is stored</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#abandonBlock(net.nutch.ndfs.Block, net.nutch.io.UTF8)">abandonBlock</A></B>(<A HREF="../../../net/nutch/ndfs/Block.html" title="class in net.nutch.ndfs">Block</A>&nbsp;b,
             <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The client would like to let go of the given block</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#blockReceived(net.nutch.ndfs.Block, net.nutch.io.UTF8)">blockReceived</A></B>(<A HREF="../../../net/nutch/ndfs/Block.html" title="class in net.nutch.ndfs">Block</A>&nbsp;block,
              <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;name)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The given node is reporting that it received a certain block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../net/nutch/ndfs/Block.html" title="class in net.nutch.ndfs">Block</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#checkObsoleteBlocks(net.nutch.io.UTF8)">checkObsoleteBlocks</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;name)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the node has not been checked in some time, go through
 its blocks and find which ones are neither valid nor pending.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#completeFile(net.nutch.io.UTF8, net.nutch.io.UTF8)">completeFile</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src,
             <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;holder)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Finalize the created file and make it world-accessible.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../net/nutch/ndfs/DatanodeInfo.html" title="class in net.nutch.ndfs">DatanodeInfo</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#datanodeReport()">datanodeReport</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#delete(net.nutch.io.UTF8)">delete</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove the indicated filename from the namespace.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#exists(net.nutch.io.UTF8)">exists</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return whether the given filename exists</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#getAdditionalBlock(net.nutch.io.UTF8)">getAdditionalBlock</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The client would like to obtain an additional block for the indicated
 filename (which is being written-to).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../net/nutch/ndfs/NDFSFileInfo.html" title="class in net.nutch.ndfs">NDFSFileInfo</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#getListing(net.nutch.io.UTF8)">getListing</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get a listing of all files at 'src'.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#gotHeartbeat(net.nutch.io.UTF8, long, long)">gotHeartbeat</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;name,
             long&nbsp;capacity,
             long&nbsp;remaining)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The given node has reported in.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#isDir(net.nutch.io.UTF8)">isDir</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Whether the given name is a directory</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#mkdirs(net.nutch.io.UTF8)">mkdirs</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create all the necessary directories</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#obtainLock(net.nutch.io.UTF8, net.nutch.io.UTF8, boolean)">obtainLock</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src,
           <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;holder,
           boolean&nbsp;exclusive)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get a lock (perhaps exclusive) on the given file</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#open(net.nutch.io.UTF8)">open</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The client wants to open the given filename.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#pendingTransfers(net.nutch.ndfs.DatanodeInfo, int)">pendingTransfers</A></B>(<A HREF="../../../net/nutch/ndfs/DatanodeInfo.html" title="class in net.nutch.ndfs">DatanodeInfo</A>&nbsp;srcNode,
                 int&nbsp;maxXfers)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return with a list of Block/DataNodeInfo sets, indicating
 where various Blocks should be copied, ASAP.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#processReport(net.nutch.ndfs.Block[], net.nutch.io.UTF8)">processReport</A></B>(<A HREF="../../../net/nutch/ndfs/Block.html" title="class in net.nutch.ndfs">Block</A>[]&nbsp;newReport,
              <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;name)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The given node is reporting all its blocks.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../net/nutch/ndfs/Block.html" title="class in net.nutch.ndfs">Block</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#recentlyInvalidBlocks(net.nutch.io.UTF8)">recentlyInvalidBlocks</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;name)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return with a list of Blocks that should be invalidated
 at the given node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#releaseLock(net.nutch.io.UTF8, net.nutch.io.UTF8)">releaseLock</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src,
            <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;holder)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Release the lock on the given file</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#renameTo(net.nutch.io.UTF8, net.nutch.io.UTF8)">renameTo</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src,
         <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;dst)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Change the indicated filename.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#renewLease(net.nutch.io.UTF8)">renewLease</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;holder)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Renew the lease(s) held by the given client</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#startFile(net.nutch.io.UTF8, net.nutch.io.UTF8, boolean)">startFile</A></B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src,
          <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;holder,
          boolean&nbsp;overwrite)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The client would like to create a new block for the indicated
 filename.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#totalCapacity()">totalCapacity</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Total raw bytes</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../net/nutch/ndfs/FSNamesystem.html#totalRemaining()">totalRemaining</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Total non-used raw bytes</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="LOG"><!-- --></A><H3>
LOG</H3>
<PRE>
public static final <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/util/logging/Logger.html" title="class or interface in java.util.logging">Logger</A> <B>LOG</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="FSNamesystem(java.io.File)"><!-- --></A><H3>
FSNamesystem</H3>
<PRE>
public <B>FSNamesystem</B>(<A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/io/File.html" title="class or interface in java.io">File</A>&nbsp;dir)
             throws <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>dir is where the filesystem directory state 
 is stored
<P>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <B>close</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="open(net.nutch.io.UTF8)"><!-- --></A><H3>
open</H3>
<PRE>
public <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A>[] <B>open</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</PRE>
<DL>
<DD>The client wants to open the given filename.  Return a
 list of (block,machineArray) pairs.  The sequence of unique blocks
 in the list indicates all the blocks that make up the filename.

 The client should choose one of the machines from the machineArray
 at random.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="startFile(net.nutch.io.UTF8, net.nutch.io.UTF8, boolean)"><!-- --></A><H3>
startFile</H3>
<PRE>
public <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A>[] <B>startFile</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src,
                          <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;holder,
                          boolean&nbsp;overwrite)</PRE>
<DL>
<DD>The client would like to create a new block for the indicated
 filename.  Return an array that consists of the block, plus a set 
 of machines.  The first on this list should be where the client 
 writes data.  Subsequent items in the list must be provided in
 the connection to the first datanode.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getAdditionalBlock(net.nutch.io.UTF8)"><!-- --></A><H3>
getAdditionalBlock</H3>
<PRE>
public <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A>[] <B>getAdditionalBlock</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</PRE>
<DL>
<DD>The client would like to obtain an additional block for the indicated
 filename (which is being written-to).  Return an array that consists
 of the block, plus a set of machines.  The first on this list should
 be where the client writes data.  Subsequent items in the list must
 be provided in the connection to the first datanode.

 Make sure the previous blocks have been reported by datanodes and
 are replicated.  Will return an empty 2-elt array if we want the
 client to "try again later".
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="abandonBlock(net.nutch.ndfs.Block, net.nutch.io.UTF8)"><!-- --></A><H3>
abandonBlock</H3>
<PRE>
public boolean <B>abandonBlock</B>(<A HREF="../../../net/nutch/ndfs/Block.html" title="class in net.nutch.ndfs">Block</A>&nbsp;b,
                            <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</PRE>
<DL>
<DD>The client would like to let go of the given block
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="completeFile(net.nutch.io.UTF8, net.nutch.io.UTF8)"><!-- --></A><H3>
completeFile</H3>
<PRE>
public int <B>completeFile</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src,
                        <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;holder)</PRE>
<DL>
<DD>Finalize the created file and make it world-accessible.  The
 FSNamesystem will already know the blocks that make up the file.
 Before we return, we make sure that all the file's blocks have 
 been reported by datanodes and are replicated correctly.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="renameTo(net.nutch.io.UTF8, net.nutch.io.UTF8)"><!-- --></A><H3>
renameTo</H3>
<PRE>
public boolean <B>renameTo</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src,
                        <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;dst)</PRE>
<DL>
<DD>Change the indicated filename.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="delete(net.nutch.io.UTF8)"><!-- --></A><H3>
delete</H3>
<PRE>
public boolean <B>delete</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</PRE>
<DL>
<DD>Remove the indicated filename from the namespace.  This may
 invalidate some blocks that make up the file.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="exists(net.nutch.io.UTF8)"><!-- --></A><H3>
exists</H3>
<PRE>
public boolean <B>exists</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</PRE>
<DL>
<DD>Return whether the given filename exists
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isDir(net.nutch.io.UTF8)"><!-- --></A><H3>
isDir</H3>
<PRE>
public boolean <B>isDir</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</PRE>
<DL>
<DD>Whether the given name is a directory
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="mkdirs(net.nutch.io.UTF8)"><!-- --></A><H3>
mkdirs</H3>
<PRE>
public boolean <B>mkdirs</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</PRE>
<DL>
<DD>Create all the necessary directories
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="obtainLock(net.nutch.io.UTF8, net.nutch.io.UTF8, boolean)"><!-- --></A><H3>
obtainLock</H3>
<PRE>
public int <B>obtainLock</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src,
                      <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;holder,
                      boolean&nbsp;exclusive)</PRE>
<DL>
<DD>Get a lock (perhaps exclusive) on the given file
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="releaseLock(net.nutch.io.UTF8, net.nutch.io.UTF8)"><!-- --></A><H3>
releaseLock</H3>
<PRE>
public int <B>releaseLock</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src,
                       <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;holder)</PRE>
<DL>
<DD>Release the lock on the given file
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="renewLease(net.nutch.io.UTF8)"><!-- --></A><H3>
renewLease</H3>
<PRE>
public void <B>renewLease</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;holder)</PRE>
<DL>
<DD>Renew the lease(s) held by the given client
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getListing(net.nutch.io.UTF8)"><!-- --></A><H3>
getListing</H3>
<PRE>
public <A HREF="../../../net/nutch/ndfs/NDFSFileInfo.html" title="class in net.nutch.ndfs">NDFSFileInfo</A>[] <B>getListing</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;src)</PRE>
<DL>
<DD>Get a listing of all files at 'src'.  The Object[] array
 exists so we can return file attributes (soon to be implemented)
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="gotHeartbeat(net.nutch.io.UTF8, long, long)"><!-- --></A><H3>
gotHeartbeat</H3>
<PRE>
public void <B>gotHeartbeat</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;name,
                         long&nbsp;capacity,
                         long&nbsp;remaining)</PRE>
<DL>
<DD>The given node has reported in.  This method should:
 1) Record the heartbeat, so the datanode isn't timed out
 2) Adjust usage stats for future block allocation
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="processReport(net.nutch.ndfs.Block[], net.nutch.io.UTF8)"><!-- --></A><H3>
processReport</H3>
<PRE>
public void <B>processReport</B>(<A HREF="../../../net/nutch/ndfs/Block.html" title="class in net.nutch.ndfs">Block</A>[]&nbsp;newReport,
                          <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;name)</PRE>
<DL>
<DD>The given node is reporting all its blocks.  Use this info to 
 update the (machine-->blocklist) and (block-->machinelist) tables.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="blockReceived(net.nutch.ndfs.Block, net.nutch.io.UTF8)"><!-- --></A><H3>
blockReceived</H3>
<PRE>
public void <B>blockReceived</B>(<A HREF="../../../net/nutch/ndfs/Block.html" title="class in net.nutch.ndfs">Block</A>&nbsp;block,
                          <A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;name)</PRE>
<DL>
<DD>The given node is reporting that it received a certain block.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="totalCapacity()"><!-- --></A><H3>
totalCapacity</H3>
<PRE>
public long <B>totalCapacity</B>()</PRE>
<DL>
<DD>Total raw bytes
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="totalRemaining()"><!-- --></A><H3>
totalRemaining</H3>
<PRE>
public long <B>totalRemaining</B>()</PRE>
<DL>
<DD>Total non-used raw bytes
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="datanodeReport()"><!-- --></A><H3>
datanodeReport</H3>
<PRE>
public <A HREF="../../../net/nutch/ndfs/DatanodeInfo.html" title="class in net.nutch.ndfs">DatanodeInfo</A>[] <B>datanodeReport</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="recentlyInvalidBlocks(net.nutch.io.UTF8)"><!-- --></A><H3>
recentlyInvalidBlocks</H3>
<PRE>
public <A HREF="../../../net/nutch/ndfs/Block.html" title="class in net.nutch.ndfs">Block</A>[] <B>recentlyInvalidBlocks</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;name)</PRE>
<DL>
<DD>Return with a list of Blocks that should be invalidated
 at the given node.  Done in response to a file delete, which 
 eliminates a number of blocks from the universe.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="checkObsoleteBlocks(net.nutch.io.UTF8)"><!-- --></A><H3>
checkObsoleteBlocks</H3>
<PRE>
public <A HREF="../../../net/nutch/ndfs/Block.html" title="class in net.nutch.ndfs">Block</A>[] <B>checkObsoleteBlocks</B>(<A HREF="../../../net/nutch/io/UTF8.html" title="class in net.nutch.io">UTF8</A>&nbsp;name)</PRE>
<DL>
<DD>If the node has not been checked in some time, go through
 its blocks and find which ones are neither valid nor pending.
 It often happens that a client will start writing blocks and
 then exit.  The blocks are on-disk, but the file will be 
 abandoned.

 It's not enough to invalidate blocks at lease expiry time;
 datanodes can go down before the client's lease on 
 the failed file expires and miss the "expire" event.

 This function considers every block on a datanode, and thus
 should only be invoked infrequently.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="pendingTransfers(net.nutch.ndfs.DatanodeInfo, int)"><!-- --></A><H3>
pendingTransfers</H3>
<PRE>
public <A HREF="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A>[] <B>pendingTransfers</B>(<A HREF="../../../net/nutch/ndfs/DatanodeInfo.html" title="class in net.nutch.ndfs">DatanodeInfo</A>&nbsp;srcNode,
                                 int&nbsp;maxXfers)</PRE>
<DL>
<DD>Return with a list of Block/DataNodeInfo sets, indicating
 where various Blocks should be copied, ASAP.

 The Array that we return consists of two objects:
 The 1st elt is an array of Blocks.
 The 2nd elt is a 2D array of DatanodeInfo objs, identifying the
     target sequence for the Block at the appropriate index.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/FSNamesystem.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../net/nutch/ndfs/FSDirectory.html" title="class in net.nutch.ndfs"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../net/nutch/ndfs/FSParam.html" title="class in net.nutch.ndfs"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="FSNamesystem.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2005 The Nutch Organization.
</BODY>
</HTML>
